@SKIP_MOVE_6(ARG,ARG:1)

;현재위치取得
LOCAL = CFLAG:MASTER:현재위치
SIF ARG:1
	LOCAL = ARG:1

;暫定目的地に直接이동できる場合
IF CAN_MOVE(LOCAL, ARG) & 1
	;そこに이동
	RETURN ARG
ENDIF

;袋小路から行ける場所は固定なので、そこを目손가락す
SELECTCASE LOCAL
CASE 611 TO 614
	RETURN 610
CASE 615,617
	RETURN 616
CASE 618
	RETURN 605
CASE 619 TO 624
	RETURN 609
ENDSELECT

SIF INRANGE(LOCAL,611, 614) && !INRANGE(ARG,610, 614)
	RETURN 603

;直接이동できない場合、1つ近い位置を暫定目的地に設定し直してループ
;地点追加時要フォロー（全ケース修正すること）
SELECTCASE ARG
	CASE 601
		;중유의 길に直接いけないなら삼도천を目손가락す
		RETURN 602
	CASE 602
		SELECTCASE LOCAL
			CASE 610 TO 614
				RETURN 603
			CASE 619 TO 621
				RETURN 608
			CASEELSE
				RETURN 607
		ENDSELECT
	CASE 603
		IF INRANGE(LOCAL,611,614)
			RETURN 610
		ELSEIF INRANGE(LOCAL,610,614)
			RETURN 602
		ELSE
			RETURN 601
		ENDIF
	CASE 604
		SELECTCASE LOCAL
			CASE 605,606,609,615 TO 624
				RETURN 607
			CASEELSE
				RETURN 602
		ENDSELECT
	CASE 605
		RETURN 607
	CASE 606
		RETURN 607
	CASE 607
		SELECTCASE LOCAL
			CASE 601 TO 604, 610 TO 614
				RETURN 602
			CASEELSE
				RETURN 608
		ENDSELECT
	CASE 608
		SELECTCASE LOCAL
			CASE 611 TO 614
				RETURN 610
			CASE 605,606,615 TO 618
				RETURN 607
			CASE 619 TO 624
				RETURN 609
			CASEELSE
				RETURN 602
		ENDSELECT
	CASE 609
		SELECTCASE LOCAL
			CASE 601 TO 605, 610 TO 614
				RETURN 607
			CASEELSE
				RETURN 608
		ENDSELECT
	CASE 610
		RETURN 603
	CASE 611 TO 614
		RETURN 610
	CASE 615,617
		SELECTCASE LOCAL
			CASE 610 TO 614
				RETURN 606
			CASEELSE
				RETURN 616
		ENDSELECT
	CASE 616
		SELECTCASE LOCAL
			CASE 610 TO 614,608,609
				RETURN 607
			CASEELSE
				RETURN 606
		ENDSELECT
	CASE 618
		SELECTCASE LOCAL
			CASE 610 TO 614
				RETURN 607
			CASEELSE
				RETURN 605
		ENDSELECT
	CASE 619 TO 624
		SELECTCASE LOCAL
			CASE 610 TO 614
				RETURN 607
			CASE 615 TO 618
				RETURN 608
			CASEELSE
				RETURN 609
		ENDSELECT
ENDSELECT
