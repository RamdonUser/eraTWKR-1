@SHIBORITORI(사정캐릭터번호, 피사정캐릭터번호)
#DIM 사정캐릭터번호
#DIM 피사정캐릭터번호
#DIMS 사정장소1
#DIMS 사정장소2

;어쩐지 DIM라든지 사용해 미묘하게 이해하기 어려울지도 모르지만, 이것은 최초로 사정 확정 후 처리에 넣으려고 역시 멈추었을 때의 아쉬움이므로
;신경쓰지 않아도 됩니다 지문이 최초로 표시되어버린다

IF 사정캐릭터번호 == MASTER
;당신이 돌진하고 있는 경우
	IF S도판정(피사정캐릭터번호, 사정캐릭터번호) < RAND:(MAX((100 - ABL:피사정캐릭터번호:욕망 * 5), 20))
		IF TALENT:피사정캐릭터번호:헌신적 && BASE:사정캐릭터번호:기력 == 0
			PRINTFORMW %CALLNAME:피사정캐릭터번호%는 %CALLNAME:사정캐릭터번호%의 컨디션을 신경써, %CALLNAME:사정캐릭터번호%의 페니스를 해방했다……
		ELSE
			PRINTFORMW %CALLNAME:피사정캐릭터번호%는 %CALLNAME:사정캐릭터번호%가 다 사정하면(자) , 만족한 듯 미소지어 %CALLNAME:사정캐릭터번호%의 페니스를 뽑아 냈다……
		ENDIF
		CALL 삽입해제(피사정캐릭터번호)
		TFLAG:106 = 0
	ELSE
		IF TALENT:피사정캐릭터번호:새드
			IF TALENT:사정캐릭터번호:마조
				IF BASE:피사정캐릭터번호:기력 > 0
					IF BASE:사정캐릭터번호:기력 == 0
						PRINTFORML %CALLNAME:피사정캐릭터번호%는 %CALLNAME:사정캐릭터번호%를 해방할 생각은 전혀 없는 것 같다
						PRINTFORMW %CALLNAME:피사정캐릭터번호%의 질육이 %CALLNAME:사정캐릭터번호%의 페니스에 관련되어 다해 한층 더 사정을 요구해 연동하기 시작하고 있다……
					ELSE
						PRINTFORMW %CALLNAME:피사정캐릭터번호%는 %CALLNAME:사정캐릭터번호%의 팔을 도망칠 수 없어요 빈틈없이 잡아, 부딪치듯이 허리를 거절하기 시작했다……
					ENDIF
				ELSEIF BASE:사정캐릭터번호:기력 == 0
					PRINTFORMW %CALLNAME:피사정캐릭터번호%벗기는 충분한 %CALLNAME:사정캐릭터번호%를 억누르며,  부딪치듯이 허리를 거절하기 시작했다……
				ELSE
					PRINTFORMW %CALLNAME:피사정캐릭터번호%는 %CALLNAME:사정캐릭터번호%가 다 하는 것 를 확인하면(자), 간발 필요하지 못하고 허리를 거절하기 시작했다……
				ENDIF
			ELSEIF BASE:피사정캐릭터번호:기력 > 0
				PRINTFORMW %CALLNAME:피사정캐릭터번호%는 %CALLNAME:사정캐릭터번호%로부터 더욱 정액을 짜 취하려고 다시 허리를 거절하기 시작했다……
			ELSEIF BASE:사정캐릭터번호:기력 == 0
				PRINTFORMW %CALLNAME:피사정캐릭터번호%벗기는 충분한 %CALLNAME:사정캐릭터번호%를 억누르며,  다시 허리를 거절하기 시작했다……
			ELSE
				PRINTFORMW %CALLNAME:피사정캐릭터번호%는 %CALLNAME:사정캐릭터번호%가 다 하는 것 를 확인하면(자), 간발 필요하지 못하고 다시 허리를 거절하기 시작했다……
			ENDIF
		ELSE
			IF TALENT:피사정캐릭터번호:헌신적 && BASE:사정캐릭터번호:기력 == 0
				PRINTFORMW %CALLNAME:피사정캐릭터번호%는 아직 만족하지 않는 것인지, %CALLNAME:사정캐릭터번호%에 사죄하고 나서 다시 허리를 거절하기 시작했다……
			ELSE
				PRINTFORMW %CALLNAME:피사정캐릭터번호%는 %CALLNAME:사정캐릭터번호%가 다 사정하면(자), %CALLNAME:사정캐릭터번호%의 뺨에 키스를 하고 나서 다시 허리를 거절하기 시작했다……
			ENDIF
		ENDIF
	ENDIF
ELSE
;당신에게 돌진하고 있는 경우
	IF TCVAR:TARGET:사정한개소플래그 == 1
		사정장소1 = 질내
		사정장소2 = 질
	ELSE
		사정장소1 = 애널
		사정장소2 = 애널
	ENDIF

	IF S도판정(사정캐릭터번호, 피사정캐릭터번호) - 빼내기정력보정(사정캐릭터번호) < RAND:(MAX((100 - ABL:피사정캐릭터번호:욕망 * 5), 20))
		IF TALENT:사정캐릭터번호:헌신적 && BASE:피사정캐릭터번호:기력 == 0
			PRINTFORMW %CALLNAME:사정캐릭터번호%는 %CALLNAME:피사정캐릭터번호%의 컨디션을 신경써, %CALLNAME:피사정캐릭터번호%의%사정장소2%로부터 페니스를 뽑아 냈다……
		ELSE
			PRINTFORMW %CALLNAME:사정캐릭터번호%는 %CALLNAME:피사정캐릭터번호%의%사정장소1%에 정액을 부어 넣어 끝내면(자), 만족한 듯 미소지어 페니스를 뽑아 냈다……
		ENDIF
		CALL 삽입해제(피사정캐릭터번호)
		CALL TOUCH_SET(0, 0, 사정캐릭터번호, 1)
	ELSE
		IF TALENT:사정캐릭터번호:새드
			IF TALENT:피사정캐릭터번호:마조
				IF BASE:사정캐릭터번호:기력 > 0
					IF BASE:피사정캐릭터번호:기력 == 0
						PRINTFORML %CALLNAME:사정캐릭터번호%는 %CALLNAME:피사정캐릭터번호%를 해방할 생각은 전혀 없는 것 같다
						PRINTFORMW %CALLNAME:사정캐릭터번호%의 페니스는 순식간에 경도와 크기와 되찾아, %CALLNAME:피사정캐릭터번호%의%사정장소2%를 뜨기 시작했다……
					ELSE
						PRINTFORMW %CALLNAME:사정캐릭터번호%는 %CALLNAME:피사정캐릭터번호%의 팔을 도망칠 수 없어요 빈틈없이 잡아, 부딪치듯이 허리를 찔러 넣기 시작했다……
					ENDIF
				ELSEIF BASE:사정캐릭터번호:기력 == 0
					PRINTFORMW %CALLNAME:사정캐릭터번호%벗기는 충분한 %CALLNAME:피사정캐릭터번호%를 억누르며,  부딪치듯이 허리를 찔러 넣기 시작했다……
				ELSE
					PRINTFORMW %CALLNAME:사정캐릭터번호%는 다 사정하면(자) , 빙같게 %CALLNAME:피사정캐릭터번호%에 달라붙어, 다시 허리를 거절하기 시작했다……
				ENDIF
			ELSEIF BASE:사정캐릭터번호:기력 > 0
				PRINTFORMW %CALLNAME:사정캐릭터번호%는 %CALLNAME:피사정캐릭터번호%의%사정장소1%에 더욱 정액을 부어 넣으려고 다시 허리를 거절하기 시작했다……
			ELSEIF BASE:피사정캐릭터번호:기력 == 0
				PRINTFORMW %CALLNAME:사정캐릭터번호%벗기는 충분한 %CALLNAME:피사정캐릭터번호%를 억누르며,  다시 허리를 거절하기 시작했다……
			ELSE
				PRINTFORMW %CALLNAME:사정캐릭터번호%는 다 사정하면(자) , 빙같게 %CALLNAME:피사정캐릭터번호%에 달라붙어, 다시 허리를 거절하기 시작했다……
			ENDIF
		ELSE
			IF TALENT:사정캐릭터번호:헌신적 && BASE:피사정캐릭터번호:기력 == 0
				PRINTFORMW %CALLNAME:사정캐릭터번호%는 아직 만족하지 않는 것인지, %CALLNAME:피사정캐릭터번호%에 사죄하고 나서 다시 허리를 거절하기 시작했다……
			ELSE
				PRINTFORMW %CALLNAME:사정캐릭터번호%는 %CALLNAME:피사정캐릭터번호%의%사정장소1%로 다 사정하면(자), %CALLNAME:피사정캐릭터번호%의 뺨에 키스를 하고 나서 다시 허리를 거절하기 시작했다……
			ENDIF
		ENDIF
	ENDIF
ENDIF

@S도판정(공격,접수)
#FUNCTION

#DIM 공격
#DIM 접수

VARSET LOCAL

LOCAL += ABL:공격:새드끼 * 5
LOCAL -= ABL:공격:마조끼 * 5
LOCAL += ABL:접수:마조끼 * 5
LOCAL -= ABL:접수:새드끼 * 5

IF TALENT:공격:새드
	IF TALENT:접수:마조
		IF BASE:공격:기력 > 0
			IF BASE:접수:기력 <= 0
				LOCAL += 999
			ELSE
				LOCAL += 90
			ENDIF
		ELSEIF BASE:접수:기력 <= 0
			LOCAL += 75
		ELSE
			LOCAL += 60
		ENDIF
	ELSEIF BASE:공격:기력 > 0
		IF BASE:접수:기력 <= 0
			LOCAL += 50
		ELSE
			LOCAL += 30
		ENDIF
	ELSEIF BASE:접수:기력 <= 0
		LOCAL += 20
	ELSE
		LOCAL += 10
	ENDIF
ELSE
	IF TALENT:접수:마조
		IF BASE:공격:기력 > 0
			IF BASE:접수:기력 <= 0
				LOCAL += 75
			ELSE
				LOCAL += 60
			ENDIF
		ELSEIF BASE:접수:기력 <= 0
			LOCAL += 50
		ELSE
			LOCAL += 35
		ENDIF
	ELSE
		SIF BASE:접수:기력 <= 0
			LOCAL += 10
		SIF BASE:공격:기력 > 0
			LOCAL += 10
	ENDIF
ENDIF

;반항적
SIF TALENT:공격:태도 == 1
	LOCAL += 5

;자제심
SIF TALENT:공격:자제심
	LOCAL -= 10

;쾌감에 솔직
IF TALENT:공격:쾌감응답 == -1
	LOCAL += 10
;쾌감에 솔직
ELSEIF TALENT:공격:쾌감응답 == 1
	LOCAL -= 5
ENDIF

SIF TALENT:공격:헌신적 && BASE:접수:기력 <= 0
	LOCAL /= 5
SIF TALENT:접수:새드
	LOCAL /= 2

RETURNF MAX(LOCAL, 0)

@빼내기정력보정(ARG)
#FUNCTION
RETURNF (MAXBASE:ARG:정력 - BASE:ARG:정력) * 50 / MAXBASE:ARG:정력 + 5
